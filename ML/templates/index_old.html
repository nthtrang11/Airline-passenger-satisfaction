<!DOCTYPE html>
<html lang="en">

<div class="main-container">
    <div class="header">
        <h1><i class="bi bi-airplane-fill"></i> AIRLINE PASSENGER SATISFACTION PREDICTION</h1>
        <p class="mb-0">Enter passenger details to predict satisfaction level</p>
    </div>

    <form id="predictionForm">
        <div class="row">
            <!-- Passenger Information -->
            <div class="col-md-4">
                <div class="card">
                    <h4 class="section-title"><i class="bi bi-person-fill"></i> Passenger Information</h4>

                    <div class="mb-3">
                        <label class="form-label">Gender</label>
                        <select class="form-select" id="gender" required>
                            {% for g in genders %}
                            <option value="{{ g }}">{{ g }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Customer Type</label>
                        <select class="form-select" id="customerType" required>
                            {% for ct in customer_types %}
                            <option value="{{ ct }}">{{ ct }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Age</label>
                        <input type="number" class="form-control" id="age" value="30" min="0" max="120" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Type of Travel</label>
                        <select class="form-select" id="travelType" required>
                            {% for tt in travel_types %}
                            <option value="{{ tt }}">{{ tt }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Class</label>
                        <select class="form-select" id="class" required>
                            {% for c in classes %}
                            <option value="{{ c }}">{{ c }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Flight Distance (km)</label>
                        <input type="number" class="form-control" id="distance" value="500" min="0" required>
                    </div>
                </div>
            </div>

            <!-- In-flight Services -->
            <div class="col-md-4">
                <div class="card">
                    <h4 class="section-title"><i class="bi bi-star-fill"></i> In-flight Services</h4>

                    <div class="mb-3">
                        <label class="form-label">Inflight Wifi Service</label>
                        <div class="star-rating">
                            <input type="radio" name="wifi" id="wifi5" value="5"><label for="wifi5">★</label>
                            <input type="radio" name="wifi" id="wifi4" value="4"><label for="wifi4">★</label>
                            <input type="radio" name="wifi" id="wifi3" value="3" checked><label for="wifi3">★</label>
                            <input type="radio" name="wifi" id="wifi2" value="2"><label for="wifi2">★</label>
                            <input type="radio" name="wifi" id="wifi1" value="1"><label for="wifi1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Departure/Arrival Time Convenient</label>
                        <div class="star-rating">
                            <input type="radio" name="timeConv" id="timeConv5" value="5"><label
                                for="timeConv5">★</label>
                            <input type="radio" name="timeConv" id="timeConv4" value="4"><label
                                for="timeConv4">★</label>
                            <input type="radio" name="timeConv" id="timeConv3" value="3" checked><label
                                for="timeConv3">★</label>
                            <input type="radio" name="timeConv" id="timeConv2" value="2"><label
                                for="timeConv2">★</label>
                            <input type="radio" name="timeConv" id="timeConv1" value="1"><label
                                for="timeConv1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Ease of Online Booking</label>
                        <div class="star-rating">
                            <input type="radio" name="booking" id="booking5" value="5"><label for="booking5">★</label>
                            <input type="radio" name="booking" id="booking4" value="4"><label for="booking4">★</label>
                            <input type="radio" name="booking" id="booking3" value="3" checked><label
                                for="booking3">★</label>
                            <input type="radio" name="booking" id="booking2" value="2"><label for="booking2">★</label>
                            <input type="radio" name="booking" id="booking1" value="1"><label for="booking1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Gate Location</label>
                        <div class="star-rating">
                            <input type="radio" name="gate" id="gate5" value="5"><label for="gate5">★</label>
                            <input type="radio" name="gate" id="gate4" value="4"><label for="gate4">★</label>
                            <input type="radio" name="gate" id="gate3" value="3" checked><label for="gate3">★</label>
                            <input type="radio" name="gate" id="gate2" value="2"><label for="gate2">★</label>
                            <input type="radio" name="gate" id="gate1" value="1"><label for="gate1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Food and Drink</label>
                        <div class="star-rating">
                            <input type="radio" name="food" id="food5" value="5"><label for="food5">★</label>
                            <input type="radio" name="food" id="food4" value="4"><label for="food4">★</label>
                            <input type="radio" name="food" id="food3" value="3" checked><label for="food3">★</label>
                            <input type="radio" name="food" id="food2" value="2"><label for="food2">★</label>
                            <input type="radio" name="food" id="food1" value="1"><label for="food1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Online Boarding</label>
                        <div class="star-rating">
                            <input type="radio" name="boarding" id="boarding5" value="5"><label
                                for="boarding5">★</label>
                            <input type="radio" name="boarding" id="boarding4" value="4"><label
                                for="boarding4">★</label>
                            <input type="radio" name="boarding" id="boarding3" value="3" checked><label
                                for="boarding3">★</label>
                            <input type="radio" name="boarding" id="boarding2" value="2"><label
                                for="boarding2">★</label>
                            <input type="radio" name="boarding" id="boarding1" value="1"><label
                                for="boarding1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Seat Comfort</label>
                        <div class="star-rating">
                            <input type="radio" name="seat" id="seat5" value="5"><label for="seat5">★</label>
                            <input type="radio" name="seat" id="seat4" value="4"><label for="seat4">★</label>
                            <input type="radio" name="seat" id="seat3" value="3" checked><label for="seat3">★</label>
                            <input type="radio" name="seat" id="seat2" value="2"><label for="seat2">★</label>
                            <input type="radio" name="seat" id="seat1" value="1"><label for="seat1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Inflight Entertainment</label>
                        <div class="star-rating">
                            <input type="radio" name="entertainment" id="entertainment5" value="5"><label
                                for="entertainment5">★</label>
                            <input type="radio" name="entertainment" id="entertainment4" value="4"><label
                                for="entertainment4">★</label>
                            <input type="radio" name="entertainment" id="entertainment3" value="3" checked><label
                                for="entertainment3">★</label>
                            <input type="radio" name="entertainment" id="entertainment2" value="2"><label
                                for="entertainment2">★</label>
                            <input type="radio" name="entertainment" id="entertainment1" value="1"><label
                                for="entertainment1">★</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ground Service & Delay -->
            <div class="col-md-4">
                <div class="card">
                    <h4 class="section-title"><i class="bi bi-clock-fill"></i> Services & Delays</h4>

                    <div class="mb-3">
                        <label class="form-label">On-board Service</label>
                        <div class="star-rating">
                            <input type="radio" name="onboard" id="onboard5" value="5"><label for="onboard5">★</label>
                            <input type="radio" name="onboard" id="onboard4" value="4"><label for="onboard4">★</label>
                            <input type="radio" name="onboard" id="onboard3" value="3" checked><label
                                for="onboard3">★</label>
                            <input type="radio" name="onboard" id="onboard2" value="2"><label for="onboard2">★</label>
                            <input type="radio" name="onboard" id="onboard1" value="1"><label for="onboard1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Leg Room Service</label>
                        <div class="star-rating">
                            <input type="radio" name="legroom" id="legroom5" value="5"><label for="legroom5">★</label>
                            <input type="radio" name="legroom" id="legroom4" value="4"><label for="legroom4">★</label>
                            <input type="radio" name="legroom" id="legroom3" value="3" checked><label
                                for="legroom3">★</label>
                            <input type="radio" name="legroom" id="legroom2" value="2"><label for="legroom2">★</label>
                            <input type="radio" name="legroom" id="legroom1" value="1"><label for="legroom1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Baggage Handling</label>
                        <div class="star-rating">
                            <input type="radio" name="baggage" id="baggage5" value="5"><label for="baggage5">★</label>
                            <input type="radio" name="baggage" id="baggage4" value="4"><label for="baggage4">★</label>
                            <input type="radio" name="baggage" id="baggage3" value="3" checked><label
                                for="baggage3">★</label>
                            <input type="radio" name="baggage" id="baggage2" value="2"><label for="baggage2">★</label>
                            <input type="radio" name="baggage" id="baggage1" value="1"><label for="baggage1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Check-in Service</label>
                        <div class="star-rating">
                            <input type="radio" name="checkin" id="checkin5" value="5"><label for="checkin5">★</label>
                            <input type="radio" name="checkin" id="checkin4" value="4"><label for="checkin4">★</label>
                            <input type="radio" name="checkin" id="checkin3" value="3" checked><label
                                for="checkin3">★</label>
                            <input type="radio" name="checkin" id="checkin2" value="2"><label for="checkin2">★</label>
                            <input type="radio" name="checkin" id="checkin1" value="1"><label for="checkin1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Inflight Service</label>
                        <div class="star-rating">
                            <input type="radio" name="service" id="service5" value="5"><label for="service5">★</label>
                            <input type="radio" name="service" id="service4" value="4"><label for="service4">★</label>
                            <input type="radio" name="service" id="service3" value="3" checked><label
                                for="service3">★</label>
                            <input type="radio" name="service" id="service2" value="2"><label for="service2">★</label>
                            <input type="radio" name="service" id="service1" value="1"><label for="service1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Cleanliness</label>
                        <div class="star-rating">
                            <input type="radio" name="cleanliness" id="cleanliness5" value="5"><label
                                for="cleanliness5">★</label>
                            <input type="radio" name="cleanliness" id="cleanliness4" value="4"><label
                                for="cleanliness4">★</label>
                            <input type="radio" name="cleanliness" id="cleanliness3" value="3" checked><label
                                for="cleanliness3">★</label>
                            <input type="radio" name="cleanliness" id="cleanliness2" value="2"><label
                                for="cleanliness2">★</label>
                            <input type="radio" name="cleanliness" id="cleanliness1" value="1"><label
                                for="cleanliness1">★</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Departure Delay (minutes)</label>
                        <input type="number" class="form-control" id="depDelay" value="0" min="0" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Arrival Delay (minutes)</label>
                        <input type="number" class="form-control" id="arrDelay" value="0" min="0" required>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-predict">
                <i class="bi bi-search"></i> PREDICT CUSTOMER SATISFACTION
            </button>
        </div>

        <div id="result"></div>
    </form>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function getRadioValue(name) {
        const radio = document.querySelector(`input[name="${name}"]:checked`);
        return radio ? radio.value : '3';
    }

    document.getElementById('predictionForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = {
            gender: document.getElementById('gender').value,
            customerType: document.getElementById('customerType').value,
            age: document.getElementById('age').value,
            travelType: document.getElementById('travelType').value,
            class: document.getElementById('class').value,
            distance: document.getElementById('distance').value,
            wifi: getRadioValue('wifi'),
            timeConv: getRadioValue('timeConv'),
            booking: getRadioValue('booking'),
            gate: getRadioValue('gate'),
            food: getRadioValue('food'),
            boarding: getRadioValue('boarding'),
            seat: getRadioValue('seat'),
            entertainment: getRadioValue('entertainment'),
            onboard: getRadioValue('onboard'),
            legroom: getRadioValue('legroom'),
            baggage: getRadioValue('baggage'),
            checkin: getRadioValue('checkin'),
            service: getRadioValue('service'),
            cleanliness: getRadioValue('cleanliness'),
            depDelay: document.getElementById('depDelay').value,
            arrDelay: document.getElementById('arrDelay').value
        };

        try {
            const response = await fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            const result = await response.json();
            const resultDiv = document.getElementById('result');

            if (result.success) {
                if (result.satisfied) {
                    resultDiv.innerHTML = `
                            <div class="result-box result-satisfied">
                                <i class="bi bi-emoji-smile-fill"></i> PASSENGER SATISFIED!
                            </div>
                        `;
                } else {
                    resultDiv.innerHTML = `
                            <div class="result-box result-dissatisfied">
                                <i class="bi bi-emoji-frown-fill"></i> PASSENGER DISSATISFIED
                            </div>
                        `;
                }
            } else {
                resultDiv.innerHTML = `
                        <div class="alert alert-danger mt-3">
                            Error: ${result.error}
                        </div>
                    `;
            }
        } catch (error) {
            document.getElementById('result').innerHTML = `
                    <div class="alert alert-danger mt-3">
                        Connection Error: ${error.message}
                    </div>
                `;
        }
    });
</script>
</body>

</html>